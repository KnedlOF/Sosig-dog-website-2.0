<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Sosig Dog</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.6.1/web3.min.js"
      integrity="sha512-5erpERW8MxcHDF7Xea9eBQPiRtxbse70pFcaHJuOhdEBQeAxGQjUwgJbuBDWve+xP/u5IoJbKjyJk50qCnMD7A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!-- favicon -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="images/x-icon/cock v2.ico"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="images/x-icon/cock v2.ico"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="images/x-icon/cock v2.ico"
    />
    <link rel="manifest" href="images/x-icon/site.webmanifest" />

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!--header-->
    <header>
      <div class="musicOn">
        <audio
          id="audio"
          style="display: none"
          src="music/sosig start.mp3"
          controls
          autostart="0"
        ></audio>
        <audio
          id="audioloop"
          style="display: none"
          src="music/sosig loop.mp3"
          controls
          autostart="0"
          loop
        ></audio>
      </div>

      <div class="outerbox">
        <div class="header">
          <div class="logo">
            <a href="/">
              <img src="images/header/cock 32x32.png" alt="logo" />
            </a>
          </div>
          <div class="menu">
            <a
              href="https://discord.gg/QmFW9mF8Xf"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img
                src="images/header/discord.webp"
                alt="Discord"
                class="smaller"
              />
            </a>
            <a
              href="https://twitter.com/SosigDogNFT"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img
                src="images/header/twitter.webp"
                alt="Twitter"
                class="smaller"
              />
            </a>
            <a
              href="https://opensea.io/collection/sosig-dog"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img
                src="images/header/opensea.webp"
                alt="Opensea"
                class="smaller"
              />
            </a>
            <a
              href="https://nftcalendar.io/event/sosig-dog/"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img
                src="images/header/nftcalendar-svg-white.webp"
                alt="nftcalendar"
                style="width: 35px"
                class="smaller"
              />
            </a>
            <button class="wallet-btn btn" id="connectWallet">
              <span>Connect Wallet</span>
            </button>
            <div class="circle">
              <div class="circlein">
                <input
                  type="checkbox"
                  name="un-mute"
                  id="un-mute"
                  onclick="play()"
                  style="cursor: pointer"
                /><label
                  for="un-mute"
                  class="unmute"
                  value="1"
                  style="cursor: pointer"
                >
                  <img src="images/mute1.png" alt="Mute" />
                </label>
                <label
                  for="un-mute"
                  class="mute"
                  value="2"
                  style="cursor: pointer"
                >
                  <img src="images/mute.png" alt="Unmute" />
                </label>
              </div>
            </div>
            <script>
              var audio = document.getElementById("audio");
              var audioloop = document.getElementById("audioloop");

              var x = 1;
              var y = 1;
              function play() {
                x++;
                y = x % 2;
                var timer;
                var div = document.getElementById("music");
                if (y == 0) {
                  audio.volume = 0.15;
                  audioloop.volume = 0.15;
                  audio.play();
                  audio.addEventListener("ended", function () {
                    audioloop.play();
                  });
                } else {
                  audio.pause();
                  audioloop.pause();
                  audio.currentTime = 0;
                  audioloop.currentTime = 0;
                }
                function Timer() {
                  window.clearTimeout(timer);
                  timer = window.setTimeout(() => {
                    div.style.display = "none";
                  }, 7000);
                }
                if (y == 0) {
                  div.style.display = "block";
                  Timer();
                } else {
                  window.clearTimeout(timer);
                  div.style.display = "none";
                }
              }
            </script>
          </div>
        </div>
      </div>
    </header>

    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://unpkg.com/moralis/dist/moralis.js"></script>
    <div id="scroll">
      <div id="networkalert" style="display: none">
        It looks like you are on wrong network, please change it to Polygon
        Mainnet.
      </div>
      <div id="music" style="display: none">
        <p>Vid Kecman - Noom</p>
      </div>
      <div id="title">
        <object data="images/sosig title white.png" id="titlepicture"></object>
      </div>
      <div class="mint-container" id="mint-container">
        <p class="supply">
          <span id="currentSupply">?</span>
          /
          <span id="totalSupply" class="supply">5000</span>
        </p>
        <button id="mintReduce" class="number-btn btn">-</button>
        <span id="MintNumber">1</span>
        <button id="mintAdd" class="number-btn btn">+</button>
        <div><button id="mintBut" class="mint-btn btn">Mint</button></div>
      </div>
      <div id="NotLive">
        <div class="box" id="mintnotlive">
          <p class="classic" id="mintnotlivetext">
            Public minting will be available at the end of April.
          </p>
        </div>
        <a
          href="https://discord.gg/QmFW9mF8Xf"
          target="_blank"
          rel="noopener noreferrer"
        >
          <button class="wallet-btn btn" id="discordbutton">
            Join Discord Community
          </button></a
        >
      </div>
      <div class="box">
        <h class="title1">Dogs for good cause</h>
        <p class="classic">
          Sosig Dogs are collection of 5000 unique weiner dogs, or as we call
          them 'sosig dogs'. Each dog has unique set of items, varying in
          rarity. With every purchase/trade you contribute to charity, 10% of
          income will be donated to charities chosen by the community of
          holders.
        </p>
      </div>

      <div class="box" id="aboutheidi">
        <h class="title1">Who is the sosig dog?</h>
        <img src="images/heidi picture.png" id="heidi" alt="Heidi" />
        <p class="classic" id="heiditext">
          This is Heidi, my pet and the sosig dog. She is very long and likes to
          eat (like most dogs). Her favourite toy is a squeaky chicken. The
          artwork was first used as an emote to share love on Twitch and now it
          has become an NFT collection.
        </p>
      </div>

      <iframe
        class="clickup-embed"
        src="https://sharing.clickup.com/b/6-174564830-2/board"
        onwheel=""
      ></iframe>

      <div class="wholediv">
        <h class="title1" id="knedltitle">Creator</h>
        <div class="member">
          <img src="images/Knedl.png" id="knedl" alt="Knedl" />
          <h1 class="title2">KNEDL</h1>
          <p class="classic" id="aboutknedl">
            17 year old electronic student from Slovenia with a passion to use
            blockchain technology to share artwork and promote a good cause.
          </p>
          <p id="contact">
            © 2022 Created by Knedl. Contact email:
            <a href="mailto:sosigdog.nft@gmail.com">sosigdog.nft@gmail.com</a>
          </p>
        </div>
      </div>
      <div id="resultSpace"></div>

      <script src="static/logic.js"></script>
      <script src="abi.js"></script>
      <script type="text/javascript">
        // 1. Connect metamask to our site. Get the user's address

        var account = null;
        var contract = null;
        const ADDRESS = "0x7948fd82b42b7289d284E72542C881FFCc72b331";
        const cost = 0.01;
        const wei_cost = cost * 10 ** 18;
        let MintNumber = 1;
        const onboardButton = document.getElementById("connectWallet");

        function HideMint() {
          var div1 = document.getElementById("mint-container");
          div1.style.display = "none";
          var div2 = document.getElementById("NotLive");
          div2.style.display = "block";
        }
        //mint not live
        HideMint();

        async function MintAllow() {
          document.getElementById("connectWallet").onclick = async () => {
            while (window.ethereum) {
              const sleep = async (ms) => {
                return new Promise((resolve) => setTimeout(resolve, ms));
              };
              await window.ethereum.send("eth_requestAccounts");
              window.web3 = new Web3(window.ethereum);

              var accounts = await web3.eth.getAccounts();
              account = accounts[0];

              onboardButton.innerText = `✔ ...${accounts[0].slice(-4)}`;

              contract = new web3.eth.Contract(ABI, ADDRESS);

              // Contract methods

              const currentSupply = await contract.methods.totalSupply().call();

              const totalSupply = await contract.methods.maxSupply().call();

              const MaxMint = await contract.methods.maxMintAmount().call();

              const MintOn = await contract.methods.paused().call();

              // const currentSupply = 4999;

              //Mint number

              if ((currentSupply < totalSupply) & (MintOn == false)) {
                document.getElementById("mintAdd").onclick = async () => {
                  if (
                    MintNumber < MaxMint &&
                    MintNumber < totalSupply - currentSupply
                  ) {
                    MintNumber++;
                  }
                  document.getElementById("MintNumber").textContent =
                    MintNumber;
                };
                document.getElementById("mintReduce").onclick = async () => {
                  if (MintNumber > 1) {
                    MintNumber--;
                  }
                  document.getElementById("MintNumber").textContent =
                    MintNumber;
                };
                document.getElementById("MintNumber").textContent = MintNumber;
                document.getElementById("currentSupply").textContent =
                  currentSupply;
                document.getElementById("totalSupply").textContent =
                  totalSupply;

                //mint button
                document.getElementById("mintBut").onclick = () => {
                  contract.methods.mint(account, MintNumber).send({
                    to: ADDRESS,
                    from: account,
                    value: MintNumber * wei_cost,
                    gasLimit: 0,
                  });
                };
              }
              //Sold out
              else if (currentSupply >= totalSupply) {
                alert("Sold out");
              }
              //if mint is not live
              else if (MintOn == true) {
                HideMint();
              }
              await sleep(2000);
            }
          };
        }

        function NetworkCheck() {
          var div = document.getElementById("networkalert");
          div.style.display = "block";
        }
      </script>
    </div>
  </body>
</html>
